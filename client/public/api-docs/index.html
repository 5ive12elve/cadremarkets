<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadre Markets API Documentation</title>
    <meta name="description" content="Complete API documentation for Cadre Markets platform - A marketplace for art and collectibles">
    <meta name="keywords" content="API, documentation, Cadre Markets, art marketplace, collectibles">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui.css" />
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        .header { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; 
            padding: 2rem; 
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header h1 { margin: 0; font-size: 2.5rem; font-weight: 300; }
        .header p { margin: 0.5rem 0 0 0; opacity: 0.9; font-size: 1.1rem; }
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        .info-box { 
            background: #f8f9fa; 
            border-left: 4px solid #667eea; 
            padding: 1rem; 
            margin-bottom: 2rem; 
            border-radius: 4px;
        }
        .info-box h3 { margin: 0 0 0.5rem 0; color: #333; }
        .info-box p { margin: 0; color: #666; }
        .swagger-container { margin-top: 2rem; }
        .swagger-ui .topbar { display: none; }
        .swagger-ui .info .title { color: #333; }
        .swagger-ui .info .description { color: #666; }
        .swagger-ui .scheme-container { background: #f8f9fa; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Cadre Markets API</h1>
        <p>Complete API documentation for the Cadre Markets platform</p>
    </div>
    
    <div class="container">
        <div class="info-box">
            <h3>ðŸš€ API Overview</h3>
            <p>Welcome to the Cadre Markets API documentation. This API provides endpoints for user authentication, marketplace listings, order management, and more.</p>
        </div>
        
        <div class="info-box">
            <h3>ðŸ”— Quick Links</h3>
            <p>
                <strong>Production API:</strong> <a href="https://api.cadremarkets.com" target="_blank">https://api.cadremarkets.com</a><br>
                <strong>Main Website:</strong> <a href="https://cadremarkets.com" target="_blank">https://cadremarkets.com</a><br>
                <strong>Support:</strong> <a href="mailto:support@cadremarkets.com">support@cadremarkets.com</a>
            </p>
        </div>
        
        <div class="swagger-container">
            <div id="swagger-ui"></div>
        </div>
    </div>

    <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-standalone-preset.js"></script>
    <script>
        window.onload = function() {
            const ui = SwaggerUIBundle({
                spec: {"openapi":"3.0.0","info":{"title":"Cadre Markets API Documentation","version":"1.0.0","description":"API documentation for Cadre Markets platform - A marketplace for art and collectibles","contact":{"name":"API Support","url":"https://cadremarkets.com","email":"support@cadremarkets.com"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"servers":[{"url":"http://localhost:3000","description":"Development server"},{"url":"https://api.cadremarkets.com","description":"Production server"}],"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"User":{"type":"object","properties":{"username":{"type":"string","example":"john_doe"},"email":{"type":"string","format":"email","example":"john@example.com"},"password":{"type":"string","format":"password","example":"********"}}},"Order":{"type":"object","properties":{"_id":{"type":"string","example":"CM1001"},"orderItems":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","example":"Vintage Art Piece"},"description":{"type":"string","example":"Beautiful vintage art piece"},"price":{"type":"number","example":1500},"sellerInfo":{"type":"object","properties":{"username":{"type":"string","example":"artSeller"},"email":{"type":"string","example":"seller@example.com"},"phoneNumber":{"type":"string","example":"+1234567890"},"city":{"type":"string","example":"New York"},"district":{"type":"string","example":"Manhattan"},"address":{"type":"string","example":"123 Art St"},"contactPreference":{"type":"string","example":"email"}}},"profit":{"type":"number","example":1350},"_id":{"type":"string","example":"507f1f77bcf86cd799439011"}}}},"status":{"type":"string","enum":["placed","ready for shipment","out for delivery","delivered","cancelled"],"example":"placed"},"customerInfo":{"type":"object","properties":{"name":{"type":"string","example":"John Doe"},"phoneNumber":{"type":"string","example":"+1234567890"},"address":{"type":"string","example":"456 Customer St"},"city":{"type":"string","example":"New York"},"district":{"type":"string","example":"Brooklyn"},"paymentMethod":{"type":"string","enum":["cash","visa"],"example":"cash"}}},"shipmentFees":{"type":"number","example":85},"cadreFees":{"type":"number","example":75},"totalPrice":{"type":"number","example":1660},"cadreProfit":{"type":"number","example":157.5},"createdAt":{"type":"string","format":"date-time","example":"2024-03-15T10:30:00Z"}}},"BackOfficeUser":{"type":"object","properties":{"username":{"type":"string","example":"admin_user"},"email":{"type":"string","format":"email","example":"admin@cadremarkets.com"},"password":{"type":"string","format":"password","example":"********"},"role":{"type":"string","enum":["admin","moderator","support"],"example":"admin"},"permissions":{"type":"array","items":{"type":"string","enum":["manage_users","manage_listings","manage_orders","manage_services","manage_support"]},"example":["manage_users","manage_listings"]},"lastLogin":{"type":"string","format":"date-time","example":"2024-03-15T10:30:00Z"}}},"Listing":{"type":"object","properties":{"name":{"type":"string","example":"Vintage Art Piece"},"description":{"type":"string","example":"Beautiful vintage art piece from the 1950s"},"price":{"type":"number","example":1500},"type":{"type":"string","enum":["Paintings & Drawings","Sculptures & 3D Art","Antiques & Collectibles","Clothing & Wearables","Home DÃ©cor","Accessories","Prints & Posters"]}}},"Project":{"type":"object","properties":{"_id":{"type":"string","example":"507f1f77bcf86cd799439011"},"title":{"type":"string","example":"Art Gallery Website"},"description":{"type":"string","example":"Modern responsive website for an art gallery"},"category":{"type":"string","example":"Web Development"},"imageUrls":{"type":"array","items":{"type":"string"},"example":["https://example.com/image1.jpg","https://example.com/image2.jpg"]},"tags":{"type":"array","items":{"type":"string"},"example":["React","Node.js","MongoDB"]},"budget":{"type":"number","example":5000},"timeline":{"type":"string","example":"3 months"},"clientName":{"type":"string","example":"Art Gallery Inc."},"status":{"type":"string","enum":["active","inactive","draft","completed"],"example":"active"},"featured":{"type":"boolean","example":false},"createdBy":{"type":"string","example":"507f1f77bcf86cd799439011"},"createdAt":{"type":"string","format":"date-time","example":"2024-03-15T10:30:00Z"},"updatedAt":{"type":"string","format":"date-time","example":"2024-03-15T10:30:00Z"}}},"SupportRequest":{"type":"object","properties":{"_id":{"type":"string","example":"507f1f77bcf86cd799439011"},"name":{"type":"string","example":"John Doe"},"email":{"type":"string","format":"email","example":"john@example.com"},"phoneNumber":{"type":"string","example":"+1234567890"},"subject":{"type":"string","example":"Unable to access my account"},"message":{"type":"string","example":"I am having trouble accessing my account after password reset"},"category":{"type":"string","enum":["technical","billing","general","account","bug_report","feature_request"],"example":"account"},"priority":{"type":"string","enum":["low","medium","high","urgent"],"example":"medium"},"status":{"type":"string","enum":["open","in_progress","resolved","closed"],"example":"open"},"assignedTo":{"type":"string","example":"507f1f77bcf86cd799439011"},"adminNotes":{"type":"string","example":"User confirmed identity via email"},"resolution":{"type":"string","example":"Account access restored after password reset"},"createdAt":{"type":"string","format":"date-time","example":"2024-03-15T10:30:00Z"},"updatedAt":{"type":"string","format":"date-time","example":"2024-03-15T10:30:00Z"}}},"Ticket":{"type":"object","properties":{"_id":{"type":"string","example":"507f1f77bcf86cd799439011"},"ticketNumber":{"type":"string","example":"TK-2024-001"},"subject":{"type":"string","example":"Order delivery issue"},"description":{"type":"string","example":"My order was supposed to arrive yesterday but I have not received it yet"},"category":{"type":"string","enum":["technical","billing","account","order","refund","other"],"example":"order"},"priority":{"type":"string","enum":["low","medium","high","urgent"],"example":"medium"},"status":{"type":"string","enum":["open","in_progress","resolved","closed"],"example":"open"},"submittedBy":{"type":"string","example":"507f1f77bcf86cd799439011"},"assignedTo":{"type":"string","example":"507f1f77bcf86cd799439011"},"attachments":{"type":"array","items":{"type":"string"},"example":["https://example.com/receipt.pdf"]},"orderReference":{"type":"string","example":"CM1001"},"resolution":{"type":"string","example":"Order was delayed due to weather. New delivery scheduled for tomorrow."},"adminNotes":{"type":"string","example":"Contacted shipping company for update"},"createdAt":{"type":"string","format":"date-time","example":"2024-03-15T10:30:00Z"},"updatedAt":{"type":"string","format":"date-time","example":"2024-03-15T10:30:00Z"}}},"Error":{"type":"object","properties":{"code":{"type":"integer","example":400},"message":{"type":"string","example":"Invalid input"}}}}},"tags":[{"name":"Authentication","description":"User authentication endpoints"},{"name":"Back Office","description":"Back office management endpoints"},{"name":"User","description":"User management endpoints"},{"name":"Listings","description":"Marketplace listing endpoints"},{"name":"Orders","description":"Order management endpoints"},{"name":"Services","description":"Service-related endpoints"},{"name":"Projects","description":"Project portfolio endpoints"},{"name":"Support Requests","description":"Customer support request endpoints"},{"name":"Customer Service Tickets","description":"Customer service ticket management endpoints"}],"paths":{"/api/auth/signup":{"post":{"tags":["Authentication"],"summary":"Register a new user","description":"Create a new user account with username, email, and password","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","email","password"],"properties":{"username":{"type":"string","description":"User's username"},"email":{"type":"string","format":"email","description":"User's email address"},"password":{"type":"string","format":"password","description":"User's password"}}}}}},"responses":{"201":{"description":"User successfully created"},"400":{"description":"Invalid input or validation error"},"500":{"description":"Server error"}}}},"/api/auth/signin":{"post":{"tags":["Authentication"],"summary":"Login user","description":"Authenticate a user with email and password","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","format":"email","description":"User's email address"},"password":{"type":"string","format":"password","description":"User's password"}}}}}},"responses":{"200":{"description":"Successfully authenticated"},"401":{"description":"Invalid credentials"},"500":{"description":"Server error"}}}},"/api/auth/google":{"post":{"tags":["Authentication"],"summary":"Google OAuth authentication","description":"Authenticate user with Google OAuth","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["tokenId"],"properties":{"tokenId":{"type":"string","description":"Google OAuth token ID"}}}}}},"responses":{"200":{"description":"Successfully authenticated with Google"},"401":{"description":"Invalid Google token"},"500":{"description":"Server error"}}}},"/api/auth/signout":{"get":{"tags":["Authentication"],"summary":"Sign out user","description":"Clear user session and sign out","responses":{"200":{"description":"Successfully signed out"},"500":{"description":"Server error"}}}},"/api/auth/verify":{"get":{"tags":["Auth"],"summary":"Verify authentication token","description":"Verify if the current user is authenticated","responses":{"200":{"description":"User is authenticated","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"user":{"type":"object"}}}}}},"401":{"description":"User is not authenticated"}}}},"/api/backoffice/login":{"post":{"tags":["Back Office"],"summary":"Login to back office","description":"Authenticate back office user and get access token","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","password"],"properties":{"username":{"type":"string"},"password":{"type":"string","format":"password"}}}}}},"responses":{"200":{"description":"Successfully logged in","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BackOfficeUser"}}}},"401":{"description":"Invalid credentials"},"404":{"description":"User not found"}}}},"/api/backoffice/logout":{"post":{"tags":["Back Office"],"summary":"Logout from back office","description":"Clear back office authentication token","responses":{"200":{"description":"Successfully logged out"}}}},"/api/backoffice/users":{"post":{"tags":["Back Office"],"summary":"Create new back office user","description":"Create a new back office user (admin only)","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BackOfficeUser"}}}},"responses":{"201":{"description":"User created successfully"},"403":{"description":"Not authorized"}}},"get":{"tags":["Back Office"],"summary":"Get all back office users","description":"Retrieve all back office users (admin only)","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of back office users","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BackOfficeUser"}}}}},"403":{"description":"Not authorized"}}}},"/api/backoffice/users/{id}":{"put":{"tags":["Back Office"],"summary":"Update back office user","description":"Update a back office user's information","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BackOfficeUser"}}}},"responses":{"200":{"description":"User updated successfully"},"403":{"description":"Not authorized"},"404":{"description":"User not found"}}},"delete":{"tags":["Back Office"],"summary":"Delete back office user","description":"Delete a back office user (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"responses":{"200":{"description":"User deleted successfully"},"403":{"description":"Not authorized"},"404":{"description":"User not found"}}}},"/api/backoffice/stats":{"get":{"tags":["Back Office"],"summary":"Get back office statistics","description":"Get comprehensive platform statistics (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"period","schema":{"type":"string","enum":["day","week","month","quarter","year"],"default":"month"},"description":"Time period for statistics"},{"in":"query","name":"startDate","schema":{"type":"string","format":"date"},"description":"Start date for custom date range"},{"in":"query","name":"endDate","schema":{"type":"string","format":"date"},"description":"End date for custom date range"}],"responses":{"200":{"description":"Successfully retrieved statistics","content":{"application/json":{"schema":{"type":"object","properties":{"users":{"type":"object","properties":{"total":{"type":"integer"},"active":{"type":"integer"},"newThisPeriod":{"type":"integer"}}},"listings":{"type":"object","properties":{"total":{"type":"integer"},"active":{"type":"integer"},"sold":{"type":"integer"},"newThisPeriod":{"type":"integer"}}},"orders":{"type":"object","properties":{"total":{"type":"integer"},"completed":{"type":"integer"},"pending":{"type":"integer"},"cancelled":{"type":"integer"},"totalRevenue":{"type":"number"},"revenueThisPeriod":{"type":"number"}}},"services":{"type":"object","properties":{"total":{"type":"integer"},"pending":{"type":"integer"},"approved":{"type":"integer"},"completed":{"type":"integer"}}},"supportRequests":{"type":"object","properties":{"total":{"type":"integer"},"open":{"type":"integer"},"resolved":{"type":"integer"},"averageResponseTime":{"type":"number"}}}}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"}}}},"/api/backoffice/dashboard":{"get":{"tags":["Back Office"],"summary":"Get dashboard data","description":"Get dashboard welcome message and user info (admin only)","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Successfully retrieved dashboard data","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Welcome to the dashboard"},"user":{"$ref":"#/components/schemas/BackOfficeUser"}}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"}}}},"/api/listing/create":{"post":{"summary":"Create a new listing","tags":["Listings"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","description","address","phoneNumber","city","type","dimensions","width","height","price","contactPreference"],"properties":{"name":{"type":"string","minLength":4,"maxLength":62},"description":{"type":"string"},"address":{"type":"string"},"phoneNumber":{"type":"string","pattern":"^\\d{10,15}$"},"city":{"type":"string"},"district":{"type":"string"},"type":{"type":"string","enum":["Paintings & Drawings","Sculptures & 3D Art","Antiques & Collectibles","Clothing & Wearables","Home DÃ©cor","Accessories","Prints & Posters"]},"dimensions":{"type":"string","enum":["2D","3D"],"description":"Required for non-clothing items"},"width":{"type":"number","minimum":1,"description":"Required for non-clothing items"},"height":{"type":"number","minimum":1,"description":"Required for non-clothing items"},"depth":{"type":"number","minimum":1,"description":"Required for 3D non-clothing items"},"availableSizes":{"type":"array","items":{"type":"string","enum":["XS","S","M","L","XL","XXL","XXXL",32,34,36,38,40,42,44,46,48,50,"One Size"]},"description":"Required for clothing items only","minItems":1,"maxItems":10},"price":{"type":"number","minimum":1000},"contactPreference":{"type":"string","enum":["Phone Number","Email"]},"imageUrls":{"type":"array","items":{"type":"string"},"maxItems":6}}}}}},"responses":{"201":{"description":"Listing created successfully"},"400":{"description":"Invalid input data"},"401":{"description":"Unauthorized"}}}},"/api/listing/delete/{id}":{"delete":{"summary":"Delete a listing","tags":["Listings"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"The listing ID"}],"responses":{"200":{"description":"Listing deleted successfully"},"401":{"description":"Unauthorized"},"404":{"description":"Listing not found"}}}},"/api/listing/update/{id}":{"post":{"summary":"Update a listing","tags":["Listings"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"The listing ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"price":{"type":"number"},"imageUrls":{"type":"array","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"Listing updated successfully"},"400":{"description":"Invalid input data"},"401":{"description":"Unauthorized"},"404":{"description":"Listing not found"}}}},"/api/listing/get/{id}":{"get":{"summary":"Get a specific listing by ID","tags":["Listings"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"The listing ID"}],"responses":{"200":{"description":"Returns the listing"},"404":{"description":"Listing not found"}}}},"/api/listing/get":{"get":{"summary":"Get all listings with filters","tags":["Listings"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","default":9},"description":"Number of listings to return"},{"in":"query","name":"startIndex","schema":{"type":"integer","default":0},"description":"Starting index for pagination"},{"in":"query","name":"type","schema":{"type":"string"},"description":"Filter by listing type"},{"in":"query","name":"searchTerm","schema":{"type":"string"},"description":"Search term for listing name"},{"in":"query","name":"sort","schema":{"type":"string","default":"createdAt"},"description":"Field to sort by"},{"in":"query","name":"order","schema":{"type":"string","enum":["asc","desc"],"default":"desc"},"description":"Sort order"}],"responses":{"200":{"description":"Returns a list of listings"}}}},"/api/listing/getForSale":{"get":{"summary":"Get listings that are for sale","tags":["Listings"],"responses":{"200":{"description":"Returns a list of listings for sale"}}}},"/api/listing/{id}/quantity":{"put":{"summary":"Update listing quantities","tags":["Listings"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"The listing ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["currentQuantity","soldQuantity"],"properties":{"currentQuantity":{"type":"number","description":"The new current quantity"},"soldQuantity":{"type":"number","description":"The new sold quantity"}}}}}},"responses":{"200":{"description":"Quantities updated successfully"},"400":{"description":"Invalid input data"},"404":{"description":"Listing not found"}}}},"/api/listing/{id}/status":{"put":{"summary":"Update listing status","tags":["Listings"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"The listing ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["Active","Pending","Sold","Cancelled"]}}}}}},"responses":{"200":{"description":"Listing status updated successfully"},"401":{"description":"Unauthorized"},"404":{"description":"Listing not found"}}}},"/api/listing/{id}/buy":{"put":{"summary":"Mark a listing as sold","tags":["Listings"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"The listing ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["buyerId"],"properties":{"buyerId":{"type":"string"}}}}}},"responses":{"200":{"description":"Listing marked as sold successfully"},"400":{"description":"Listing already sold"},"401":{"description":"Unauthorized"},"404":{"description":"Listing not found"}}}},"/api/listing/backoffice/all":{"get":{"summary":"Get all listings for back office (no status filtering)","tags":["Listings"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","default":100},"description":"Number of listings to return"},{"in":"query","name":"startIndex","schema":{"type":"integer","default":0},"description":"Starting index for pagination"},{"in":"query","name":"status","schema":{"type":"string"},"description":"Filter by listing status (optional)"},{"in":"query","name":"type","schema":{"type":"string"},"description":"Filter by listing type"},{"in":"query","name":"searchTerm","schema":{"type":"string"},"description":"Search term for listing name"},{"in":"query","name":"sort","schema":{"type":"string","default":"createdAt"},"description":"Field to sort by"},{"in":"query","name":"order","schema":{"type":"string","enum":["asc","desc"],"default":"desc"},"description":"Sort order"}],"responses":{"200":{"description":"Returns a list of all listings"},"401":{"description":"Unauthorized"}}}},"/api/listing/clothing/sizes":{"get":{"summary":"Get available clothing sizes","tags":["Listings"],"responses":{"200":{"description":"Returns a list of available clothing sizes","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"sizes":{"type":"array","items":{"type":"string"},"example":["XS","S","M","L","XL","XXL","XXXL","32","34","36","38","40","42","44","46","48","50","One Size"]},"message":{"type":"string"}}}}}}}}},"/api/listing/backoffice/statistics":{"get":{"summary":"Get listing statistics for back office dashboard","tags":["Listings"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"timeframe","schema":{"type":"integer","default":30},"description":"Number of days for trend calculation"}],"responses":{"200":{"description":"Returns comprehensive listing statistics","content":{"application/json":{"schema":{"type":"object","properties":{"overview":{"type":"object","properties":{"totalListings":{"type":"number"},"totalValue":{"type":"number"},"totalCadreRevenue":{"type":"number"},"averagePrice":{"type":"number"},"activeCount":{"type":"number"},"inactiveCount":{"type":"number"},"activePercentage":{"type":"number"}}},"distributions":{"type":"object","properties":{"status":{"type":"object"},"category":{"type":"object"},"geographic":{"type":"object"},"listingType":{"type":"object"},"priceRanges":{"type":"object"}}},"trends":{"type":"object","properties":{"listingGrowth":{"type":"object"},"valueGrowth":{"type":"object"}}}}}}}},"401":{"description":"Unauthorized"}}}},"/api/listing":{"get":{"summary":"Legacy endpoint - redirects to /api/listing/get","tags":["Listings"],"responses":{"301":{"description":"Redirects to correct endpoint"}}}},"/api/listing/public":{"get":{"summary":"Legacy endpoint - redirects to /api/listing/get","tags":["Listings"],"responses":{"301":{"description":"Redirects to correct endpoint"}}}},"/api/orders":{"post":{"tags":["Orders"],"summary":"Create a new order","description":"Create a new order with items and customer information","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderItems","customerInfo"],"properties":{"orderItems":{"type":"array","items":{"type":"object","required":["_id","quantity"],"properties":{"_id":{"type":"string","description":"Listing ID"},"quantity":{"type":"number","description":"Quantity to order"}}}},"customerInfo":{"type":"object","required":["name","phoneNumber","address","city","district"],"properties":{"name":{"type":"string"},"phoneNumber":{"type":"string"},"address":{"type":"string"},"city":{"type":"string"},"district":{"type":"string"},"paymentMethod":{"type":"string","enum":["cash","visa"],"default":"cash"}}}}}}}},"responses":{"201":{"description":"Order created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order"}}}},"400":{"description":"Invalid input or insufficient stock"},"500":{"description":"Server error"}}},"get":{"tags":["Orders"],"summary":"Get all orders","description":"Retrieve all orders (admin only)","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of all orders","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Order"}}}}},"500":{"description":"Server error"}}}},"/api/orders/{id}/status":{"put":{"tags":["Orders"],"summary":"Update order status","description":"Update the status of an existing order (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Order ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["placed","out for delivery","delivered","cancelled"]}}}}}},"responses":{"200":{"description":"Order status updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order"}}}},"400":{"description":"Invalid status"},"404":{"description":"Order not found"},"500":{"description":"Server error"}}}},"/api/orders/{id}":{"delete":{"tags":["Orders"],"summary":"Delete order","description":"Delete an existing order (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Order ID"}],"responses":{"200":{"description":"Order deleted successfully"},"404":{"description":"Order not found"},"500":{"description":"Server error"}}}},"/api/orders/{orderId}/items/{itemId}/status-checks":{"put":{"tags":["Orders"],"summary":"Update order item status checks","description":"Update the status checks for a specific item in an order (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"orderId","required":true,"schema":{"type":"string"},"description":"Order ID (e.g., CM1)"},{"in":"path","name":"itemId","required":true,"schema":{"type":"string"},"description":"Item ID within the order"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"statusChecks":{"type":"object","properties":{"itemReceived":{"type":"boolean"},"itemVerified":{"type":"boolean"},"itemPacked":{"type":"boolean"},"readyForShipment":{"type":"boolean"}}}}}}}},"responses":{"200":{"description":"Status checks updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"statusChecks":{"type":"object","properties":{"itemReceived":{"type":"boolean"},"itemVerified":{"type":"boolean"},"itemPacked":{"type":"boolean"},"readyForShipment":{"type":"boolean"}}}}}}}},"400":{"description":"Invalid status checks"},"404":{"description":"Order or item not found"},"500":{"description":"Server error"}}}},"/api/orders/{orderId}/items/{itemId}":{"delete":{"tags":["Orders"],"summary":"Delete order item","description":"Delete a specific item from an order (admin only). If this is the last item, the entire order will be deleted.","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"orderId","required":true,"schema":{"type":"string"},"description":"Order ID (e.g., CM1)"},{"in":"path","name":"itemId","required":true,"schema":{"type":"string"},"description":"Item ID within the order"}],"responses":{"200":{"description":"Order item deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"order":{"$ref":"#/components/schemas/Order"},"orderDeleted":{"type":"boolean","description":"True if the entire order was deleted because no items remained"}}}}}},"404":{"description":"Order or item not found"},"500":{"description":"Server error"}}}},"/api/orders/{orderId}/items/{itemId}/quantity":{"put":{"tags":["Orders"],"summary":"Update order item quantity","description":"Update the quantity of a specific item in an order (admin only). Automatically manages listing inventory.","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"orderId","required":true,"schema":{"type":"string"},"description":"Order ID (e.g., CM1)"},{"in":"path","name":"itemId","required":true,"schema":{"type":"string"},"description":"Item ID within the order"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["newQuantity"],"properties":{"newQuantity":{"type":"integer","minimum":1,"description":"New quantity for the order item"}}}}}},"responses":{"200":{"description":"Order item quantity updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"order":{"$ref":"#/components/schemas/Order"},"updatedItem":{"type":"object"},"listingStock":{"type":"object","properties":{"currentQuantity":{"type":"integer"},"soldQuantity":{"type":"integer"}}}}}}}},"400":{"description":"Invalid quantity or insufficient stock"},"404":{"description":"Order or item not found"},"500":{"description":"Server error"}}}},"/api/orders/backoffice/statistics":{"get":{"summary":"Get order statistics for back office dashboard","tags":["Orders"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"timeframe","schema":{"type":"integer","default":30},"description":"Number of days for trend calculation"}],"responses":{"200":{"description":"Returns comprehensive order statistics","content":{"application/json":{"schema":{"type":"object","properties":{"overview":{"type":"object","properties":{"totalOrders":{"type":"number"},"totalRevenue":{"type":"number"},"totalCadreRevenue":{"type":"number"},"averageOrderValue":{"type":"number"},"totalItemsSold":{"type":"number"},"activeCount":{"type":"number"},"completedCount":{"type":"number"},"activePercentage":{"type":"number"},"completionRate":{"type":"number"}}},"distributions":{"type":"object","properties":{"status":{"type":"object"},"paymentMethod":{"type":"object"},"geographic":{"type":"object"},"itemType":{"type":"object"}}},"fulfillment":{"type":"object","properties":{"progress":{"type":"object"},"completionPercentages":{"type":"object"}}},"trends":{"type":"object","properties":{"orderGrowth":{"type":"object"},"revenueGrowth":{"type":"object"}}}}}}}},"401":{"description":"Unauthorized"}}}},"/api/projects":{"get":{"tags":["Projects"],"summary":"Get all projects","description":"Retrieve all projects with optional filtering","parameters":[{"in":"query","name":"featured","schema":{"type":"boolean"},"description":"Filter by featured projects"},{"in":"query","name":"status","schema":{"type":"string","enum":["active","inactive","draft","completed"]},"description":"Filter by project status"},{"in":"query","name":"category","schema":{"type":"string"},"description":"Filter by project category"},{"in":"query","name":"limit","schema":{"type":"integer","default":10},"description":"Number of projects to return"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Page number for pagination"}],"responses":{"200":{"description":"Successfully retrieved projects","content":{"application/json":{"schema":{"type":"object","properties":{"projects":{"type":"array","items":{"$ref":"#/components/schemas/Project"}},"totalPages":{"type":"integer"},"currentPage":{"type":"integer"},"totalProjects":{"type":"integer"}}}}}}}},"post":{"tags":["Projects"],"summary":"Create a new project","description":"Create a new project (requires authentication)","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["title","description","category"],"properties":{"title":{"type":"string","minLength":3,"maxLength":100},"description":{"type":"string","minLength":10},"category":{"type":"string"},"imageUrls":{"type":"array","items":{"type":"string"},"maxItems":10},"tags":{"type":"array","items":{"type":"string"}},"budget":{"type":"number"},"timeline":{"type":"string"},"clientName":{"type":"string"},"status":{"type":"string","enum":["active","inactive","draft","completed"],"default":"draft"}}}}}},"responses":{"201":{"description":"Project created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"400":{"description":"Invalid input data"},"401":{"description":"Unauthorized"}}}},"/api/projects/{id}":{"get":{"tags":["Projects"],"summary":"Get project by ID","description":"Retrieve a specific project by ID","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Project ID"}],"responses":{"200":{"description":"Successfully retrieved project","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"404":{"description":"Project not found"}}},"put":{"tags":["Projects"],"summary":"Update project","description":"Update a project (requires authentication)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Project ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string"},"description":{"type":"string"},"category":{"type":"string"},"imageUrls":{"type":"array","items":{"type":"string"}},"tags":{"type":"array","items":{"type":"string"}},"budget":{"type":"number"},"timeline":{"type":"string"},"clientName":{"type":"string"}}}}}},"responses":{"200":{"description":"Project updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"400":{"description":"Invalid input data"},"401":{"description":"Unauthorized"},"404":{"description":"Project not found"}}},"delete":{"tags":["Projects"],"summary":"Delete project","description":"Delete a project (requires authentication)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Project ID"}],"responses":{"200":{"description":"Project deleted successfully"},"401":{"description":"Unauthorized"},"404":{"description":"Project not found"}}}},"/api/projects/{id}/featured":{"patch":{"tags":["Projects"],"summary":"Toggle project featured status","description":"Toggle whether a project is featured (requires authentication)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Project ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["featured"],"properties":{"featured":{"type":"boolean","description":"Whether the project should be featured"}}}}}},"responses":{"200":{"description":"Project featured status updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Project not found"}}}},"/api/projects/{id}/status":{"patch":{"tags":["Projects"],"summary":"Update project status","description":"Update the status of a project (requires authentication)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Project ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["active","inactive","draft","completed"],"description":"New project status"}}}}}},"responses":{"200":{"description":"Project status updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"400":{"description":"Invalid status value"},"401":{"description":"Unauthorized"},"404":{"description":"Project not found"}}}},"/api/services":{"get":{"tags":["Services"],"summary":"Get all services","description":"Retrieve all service requests","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["pending","approved","rejected","completed"]},"description":"Filter by status"},{"in":"query","name":"serviceType","schema":{"type":"string","enum":["visual","ad","sound"]},"description":"Filter by service type"}],"responses":{"200":{"description":"List of service requests retrieved successfully"},"401":{"description":"Unauthorized"}}},"post":{"tags":["Services"],"summary":"Create a new service request","description":"Submit a new service request","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["requesterName","phoneNumber","email","serviceType","subType","budget","designStage","projectScope"],"properties":{"requesterName":{"type":"string"},"phoneNumber":{"type":"string"},"email":{"type":"string"},"serviceType":{"type":"string","enum":["visual","ad","sound"]},"subType":{"type":"string"},"budget":{"type":"string"},"designStage":{"type":"string"},"projectScope":{"type":"string"},"details":{"type":"string"}}}}}},"responses":{"201":{"description":"Service request created successfully"},"400":{"description":"Invalid input data"}}}},"/api/services/{id}":{"get":{"tags":["Services"],"summary":"Get a service request by ID","description":"Retrieve a specific service request by its ID","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Service request ID"}],"responses":{"200":{"description":"Service request retrieved successfully"},"401":{"description":"Unauthorized"},"404":{"description":"Service request not found"}}},"delete":{"tags":["Services"],"summary":"Delete a service request","description":"Delete a service request","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Service request ID"}],"responses":{"200":{"description":"Service request deleted successfully"},"401":{"description":"Unauthorized"},"404":{"description":"Service request not found"}}}},"/api/services/{id}/status":{"put":{"tags":["Services"],"summary":"Update service request status","description":"Update the status of a service request","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Service request ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["pending","approved","rejected","completed"]},"notes":{"type":"string"}}}}}},"responses":{"200":{"description":"Service request status updated successfully"},"401":{"description":"Unauthorized"},"404":{"description":"Service request not found"}}}},"/api/services/backoffice/statistics":{"get":{"summary":"Get service statistics for back office dashboard","tags":["Services"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"timeframe","schema":{"type":"integer","default":30},"description":"Number of days for trend calculation"}],"responses":{"200":{"description":"Returns comprehensive service statistics","content":{"application/json":{"schema":{"type":"object","properties":{"overview":{"type":"object","properties":{"totalServices":{"type":"number"},"activeCount":{"type":"number"},"completedCount":{"type":"number"},"rejectedCount":{"type":"number"},"activePercentage":{"type":"number"},"completionRate":{"type":"number"}}},"distributions":{"type":"object","properties":{"status":{"type":"object"},"serviceType":{"type":"object"},"budget":{"type":"object"},"designStage":{"type":"object"}}},"performance":{"type":"object","properties":{"pendingCount":{"type":"number"},"avgResponseTime":{"type":"number"},"oldestPending":{"type":"number"}}},"trends":{"type":"object","properties":{"serviceGrowth":{"type":"object"}}}}}}}},"401":{"description":"Unauthorized"}}}},"/api/support":{"post":{"tags":["Support Requests"],"summary":"Create a new support request","description":"Submit a new support request (public endpoint)","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","email","subject","message"],"properties":{"name":{"type":"string","minLength":2,"maxLength":100,"description":"Full name of the person submitting the request"},"email":{"type":"string","format":"email","description":"Contact email address"},"phoneNumber":{"type":"string","description":"Contact phone number (optional)"},"subject":{"type":"string","minLength":5,"maxLength":200,"description":"Subject of the support request"},"message":{"type":"string","minLength":10,"maxLength":2000,"description":"Detailed message describing the issue or request"},"category":{"type":"string","enum":["technical","billing","general","account","bug_report","feature_request"],"default":"general","description":"Category of the support request"},"priority":{"type":"string","enum":["low","medium","high","urgent"],"default":"medium","description":"Priority level of the request"}}}}}},"responses":{"201":{"description":"Support request created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupportRequest"}}}},"400":{"description":"Invalid input data"},"500":{"description":"Server error"}}},"get":{"tags":["Support Requests"],"summary":"Get all support requests","description":"Retrieve all support requests (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["open","in_progress","resolved","closed"]},"description":"Filter by request status"},{"in":"query","name":"category","schema":{"type":"string","enum":["technical","billing","general","account","bug_report","feature_request"]},"description":"Filter by request category"},{"in":"query","name":"priority","schema":{"type":"string","enum":["low","medium","high","urgent"]},"description":"Filter by priority level"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Page number for pagination"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Number of requests per page"},{"in":"query","name":"sortBy","schema":{"type":"string","enum":["createdAt","updatedAt","priority","status"],"default":"createdAt"},"description":"Field to sort by"},{"in":"query","name":"order","schema":{"type":"string","enum":["asc","desc"],"default":"desc"},"description":"Sort order"}],"responses":{"200":{"description":"Successfully retrieved support requests","content":{"application/json":{"schema":{"type":"object","properties":{"requests":{"type":"array","items":{"$ref":"#/components/schemas/SupportRequest"}},"totalPages":{"type":"integer"},"currentPage":{"type":"integer"},"totalRequests":{"type":"integer"}}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"}}}},"/api/support/stats":{"get":{"tags":["Support Requests"],"summary":"Get support request statistics","description":"Get comprehensive statistics about support requests (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"period","schema":{"type":"string","enum":["week","month","quarter","year"],"default":"month"},"description":"Time period for statistics"}],"responses":{"200":{"description":"Successfully retrieved support statistics","content":{"application/json":{"schema":{"type":"object","properties":{"totalRequests":{"type":"integer","description":"Total number of support requests"},"openRequests":{"type":"integer","description":"Number of open requests"},"resolvedRequests":{"type":"integer","description":"Number of resolved requests"},"averageResponseTime":{"type":"number","description":"Average response time in hours"},"averageResolutionTime":{"type":"number","description":"Average resolution time in hours"},"requestsByCategory":{"type":"object","properties":{"technical":{"type":"integer"},"billing":{"type":"integer"},"general":{"type":"integer"},"account":{"type":"integer"},"bug_report":{"type":"integer"},"feature_request":{"type":"integer"}}},"requestsByPriority":{"type":"object","properties":{"low":{"type":"integer"},"medium":{"type":"integer"},"high":{"type":"integer"},"urgent":{"type":"integer"}}}}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"}}}},"/api/support/backoffice/statistics":{"get":{"summary":"Get comprehensive support request statistics for back office dashboard","tags":["Support Requests"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"timeframe","schema":{"type":"integer","default":30},"description":"Number of days for trend calculation"}],"responses":{"200":{"description":"Returns comprehensive support request statistics","content":{"application/json":{"schema":{"type":"object","properties":{"overview":{"type":"object","properties":{"totalRequests":{"type":"number"},"activeCount":{"type":"number"},"resolvedCount":{"type":"number"},"resolutionRate":{"type":"number"},"avgResponseTime":{"type":"number"}}},"distributions":{"type":"object","properties":{"status":{"type":"object"},"type":{"type":"object"},"priority":{"type":"object"},"category":{"type":"object"}}},"performance":{"type":"object","properties":{"urgentCount":{"type":"number"},"oldestNew":{"type":"number"}}},"trends":{"type":"object","properties":{"requestGrowth":{"type":"object"}}}}}}}},"401":{"description":"Unauthorized"}}}},"/api/support/{id}":{"get":{"tags":["Support Requests"],"summary":"Get support request by ID","description":"Retrieve a specific support request by ID (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Support request ID"}],"responses":{"200":{"description":"Successfully retrieved support request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupportRequest"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Support request not found"}}},"put":{"tags":["Support Requests"],"summary":"Update support request","description":"Update a support request (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Support request ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["open","in_progress","resolved","closed"]},"priority":{"type":"string","enum":["low","medium","high","urgent"]},"assignedTo":{"type":"string","description":"ID of the admin/support agent assigned to this request"},"adminNotes":{"type":"string","description":"Internal notes from admin/support team"},"resolution":{"type":"string","description":"Resolution details (for resolved/closed requests)"}}}}}},"responses":{"200":{"description":"Support request updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SupportRequest"}}}},"400":{"description":"Invalid input data"},"401":{"description":"Unauthorized"},"404":{"description":"Support request not found"}}},"delete":{"tags":["Support Requests"],"summary":"Delete support request","description":"Delete a support request (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Support request ID"}],"responses":{"200":{"description":"Support request deleted successfully"},"401":{"description":"Unauthorized"},"404":{"description":"Support request not found"}}}},"/api/customer-service/tickets":{"get":{"tags":["Customer Service Tickets"],"summary":"Get all tickets","description":"Retrieve all customer service tickets (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["open","in_progress","resolved","closed"]},"description":"Filter by ticket status"},{"in":"query","name":"priority","schema":{"type":"string","enum":["low","medium","high","urgent"]},"description":"Filter by priority level"},{"in":"query","name":"category","schema":{"type":"string"},"description":"Filter by ticket category"},{"in":"query","name":"assignedTo","schema":{"type":"string"},"description":"Filter by assigned agent ID"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Page number for pagination"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Number of tickets per page"},{"in":"query","name":"sortBy","schema":{"type":"string","enum":["createdAt","updatedAt","priority","status"],"default":"createdAt"},"description":"Field to sort by"},{"in":"query","name":"order","schema":{"type":"string","enum":["asc","desc"],"default":"desc"},"description":"Sort order"}],"responses":{"200":{"description":"Successfully retrieved tickets","content":{"application/json":{"schema":{"type":"object","properties":{"tickets":{"type":"array","items":{"$ref":"#/components/schemas/Ticket"}},"totalPages":{"type":"integer"},"currentPage":{"type":"integer"},"totalTickets":{"type":"integer"}}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"}}},"post":{"tags":["Customer Service Tickets"],"summary":"Create a new ticket","description":"Create a new customer service ticket (requires authentication)","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["subject","description","category"],"properties":{"subject":{"type":"string","minLength":5,"maxLength":200,"description":"Ticket subject"},"description":{"type":"string","minLength":10,"maxLength":2000,"description":"Detailed description of the issue"},"category":{"type":"string","enum":["technical","billing","account","order","refund","other"],"description":"Ticket category"},"priority":{"type":"string","enum":["low","medium","high","urgent"],"default":"medium","description":"Priority level"},"attachments":{"type":"array","items":{"type":"string"},"description":"Array of attachment URLs"},"orderReference":{"type":"string","description":"Reference to related order (if applicable)"}}}}}},"responses":{"201":{"description":"Ticket created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Ticket"}}}},"400":{"description":"Invalid input data"},"401":{"description":"Unauthorized"}}}},"/api/customer-service/tickets/{id}/status":{"put":{"tags":["Customer Service Tickets"],"summary":"Update ticket status","description":"Update the status of a customer service ticket (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Ticket ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["open","in_progress","resolved","closed"],"description":"New ticket status"},"resolution":{"type":"string","description":"Resolution details (required for resolved/closed status)"},"assignedTo":{"type":"string","description":"ID of the agent assigned to this ticket"},"adminNotes":{"type":"string","description":"Internal notes from admin/support team"}}}}}},"responses":{"200":{"description":"Ticket status updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Ticket"}}}},"400":{"description":"Invalid status or missing required fields"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"Ticket not found"}}}},"/api/customer-service/tickets/{id}":{"get":{"tags":["Customer Service Tickets"],"summary":"Get ticket by ID","description":"Retrieve a specific customer service ticket by ID","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"Ticket ID"}],"responses":{"200":{"description":"Successfully retrieved ticket","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Ticket"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Ticket not found"}}}},"/api/user/test":{"get":{"tags":["User"],"summary":"Test user endpoint","description":"Test endpoint to verify user route functionality","responses":{"200":{"description":"Test successful"}}}},"/api/user/auth-test":{"get":{"tags":["User"],"summary":"Test authentication","description":"Test endpoint to verify authentication is working","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Authentication successful"},"401":{"description":"Authentication failed"}}}},"/api/user/update/{id}":{"post":{"tags":["User"],"summary":"Update user","description":"Update user information","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"200":{"description":"User updated successfully"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}}}},"/api/user/delete/{id}":{"delete":{"tags":["User"],"summary":"Delete user","description":"Delete user account","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"responses":{"200":{"description":"User deleted successfully"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}}}},"/api/user/listings/{id}":{"get":{"tags":["User"],"summary":"Get user listings","description":"Get all listings for a specific user","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"responses":{"200":{"description":"Successfully retrieved user listings"},"404":{"description":"User not found"}}}},"/api/user/{id}":{"get":{"tags":["User"],"summary":"Get user","description":"Get user information by ID","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"responses":{"200":{"description":"Successfully retrieved user information"},"404":{"description":"User not found"}}}},"/api/user/password/{id}":{"put":{"tags":["User"],"summary":"Update user password","description":"Update password for a specific user","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["currentPassword","newPassword"],"properties":{"currentPassword":{"type":"string","format":"password"},"newPassword":{"type":"string","format":"password"}}}}}},"responses":{"200":{"description":"Password updated successfully"},"400":{"description":"Invalid current password"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}}}},"/api/user/me":{"get":{"tags":["User"],"summary":"Get current user profile","description":"Get the current authenticated user's profile information","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Successfully retrieved current user profile","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"401":{"description":"Unauthorized"}}}},"/api/user":{"get":{"tags":["User"],"summary":"Get all users","description":"Get all users (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Page number for pagination"},{"in":"query","name":"limit","schema":{"type":"integer","default":10},"description":"Number of users per page"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search term for username or email"}],"responses":{"200":{"description":"Successfully retrieved users list","content":{"application/json":{"schema":{"type":"object","properties":{"users":{"type":"array","items":{"$ref":"#/components/schemas/User"}},"totalPages":{"type":"integer"},"currentPage":{"type":"integer"},"totalUsers":{"type":"integer"}}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"}}}},"/api/user/{id}/role":{"put":{"tags":["User"],"summary":"Update user role","description":"Update user role (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["role"],"properties":{"role":{"type":"string","enum":["user","admin","moderator"]}}}}}},"responses":{"200":{"description":"User role updated successfully"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"}}}},"/api/user/{id}/status":{"put":{"tags":["User"],"summary":"Update user status","description":"Update user status (admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["active","inactive","suspended","banned"]}}}}}},"responses":{"200":{"description":"User status updated successfully"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"User not found"}}}},"/api/user/{id}/stats":{"get":{"tags":["User"],"summary":"Get user statistics","description":"Get comprehensive statistics for a specific user","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"responses":{"200":{"description":"Successfully retrieved user statistics","content":{"application/json":{"schema":{"type":"object","properties":{"totalListings":{"type":"integer"},"activeListings":{"type":"integer"},"soldListings":{"type":"integer"},"totalSales":{"type":"number"},"totalRevenue":{"type":"number"},"averageRating":{"type":"number"},"totalReviews":{"type":"integer"}}}}}},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}}}},"/api/user/{id}/email-preferences":{"put":{"tags":["User"],"summary":"Update email preferences","description":"Update user's email notification preferences","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"marketing":{"type":"boolean","description":"Receive marketing emails"},"orderUpdates":{"type":"boolean","description":"Receive order update emails"},"promotions":{"type":"boolean","description":"Receive promotional emails"},"newsletter":{"type":"boolean","description":"Receive newsletter emails"}}}}}},"responses":{"200":{"description":"Email preferences updated successfully"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}}}},"/api/user/{id}/notification-settings":{"put":{"tags":["User"],"summary":"Update notification settings","description":"Update user's notification settings","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"pushNotifications":{"type":"boolean","description":"Enable push notifications"},"emailNotifications":{"type":"boolean","description":"Enable email notifications"},"smsNotifications":{"type":"boolean","description":"Enable SMS notifications"},"orderUpdates":{"type":"boolean","description":"Receive order update notifications"},"messageAlerts":{"type":"boolean","description":"Receive message alerts"}}}}}},"responses":{"200":{"description":"Notification settings updated successfully"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}}}},"/api/user/backoffice/statistics":{"get":{"tags":["User"],"summary":"Get user statistics for back office","description":"Get comprehensive user statistics for the back office dashboard","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"timeframe","schema":{"type":"string","default":"30"},"description":"Number of days for trend analysis (default 30)"}],"responses":{"200":{"description":"Successfully retrieved user statistics","content":{"application/json":{"schema":{"type":"object","properties":{"overview":{"type":"object","properties":{"totalUsers":{"type":"integer"},"activeUsers":{"type":"integer"},"bannedUsers":{"type":"integer"},"artistCount":{"type":"integer"},"buyerCount":{"type":"integer"},"activePercentage":{"type":"number"},"artistPercentage":{"type":"number"},"activeLastWeek":{"type":"integer"},"activeLastMonth":{"type":"integer"}}},"trends":{"type":"object","properties":{"userGrowth":{"type":"object","properties":{"value":{"type":"number"},"direction":{"type":"string","enum":["up","down","neutral"]},"period":{"type":"string"}}}}},"distributions":{"type":"object","properties":{"role":{"type":"object"},"status":{"type":"object"},"engagement":{"type":"object","properties":{"high":{"type":"integer"},"medium":{"type":"integer"},"low":{"type":"integer"}}}}},"activity":{"type":"object","properties":{"activeLastWeek":{"type":"integer"},"activeLastMonth":{"type":"integer"},"monthlyData":{"type":"array","items":{"type":"object","properties":{"month":{"type":"string"},"registrations":{"type":"integer"},"activeUsers":{"type":"integer"}}}},"emailPreferences":{"type":"object","properties":{"marketing":{"type":"integer"},"notifications":{"type":"integer"}}}}},"marketplace":{"type":"object","properties":{"topArtists":{"type":"array","items":{"type":"object","properties":{"userId":{"type":"string"},"total":{"type":"integer"},"active":{"type":"integer"},"sold":{"type":"integer"},"pending":{"type":"integer"},"user":{"type":"object"}}}},"totalListings":{"type":"integer"},"totalOrders":{"type":"integer"},"averageListingsPerArtist":{"type":"string"}}},"performance":{"type":"object","properties":{"engagementRate":{"type":"number"},"conversionRate":{"type":"number"},"artistAdoptionRate":{"type":"number"}}},"timeframe":{"type":"object","properties":{"days":{"type":"integer"},"periodStart":{"type":"string","format":"date-time"},"periodEnd":{"type":"string","format":"date-time"}}}}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"}}}}}},
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                layout: "StandaloneLayout",
                docExpansion: "list",
                filter: true,
                showRequestHeaders: true,
                tryItOutEnabled: true,
                customSiteTitle: "Cadre Markets API Documentation"
            });
        };
    </script>
</body>
</html>